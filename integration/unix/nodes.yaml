nodes:
  ssh-host:
    type: ssh
    user: root
    identity-file: integration/containers/ssh/id_rsa
    addr: localhost:2222

tests:
  it should test ssh host:
    nodes:
      - ssh-host
      - local
    command: cat /root/int-test && whoami && pwd
    stdout:
      contains:
        - test file ssh
        - root
        - /root
    exit-code: 0

  it should set env variable:
    nodes:
      - ssh-host
    config:
      env:
        LC_TEST_ENV: env var
    command: echo $LC_TEST_ENV
    stdout: env var

  it should fail if env could not be set:
    nodes:
      - ssh-host
    config:
      env:
        TEST_ENV: env var
    command: echo $TEST_ENV
    stdout: env var
